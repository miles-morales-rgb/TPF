<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TATA PLAY FIBER – Smart Dashboard</title>
    <style>
        * { box-sizing: border-box; font-family: "Segoe UI", Roboto, sans-serif; }
        body { margin: 0; min-height: 100vh; background: #020617; color: white; padding: 40px 20px; display: flex; flex-direction: column; align-items: center; }
        
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 42px; margin: 0; background: linear-gradient(to right, #38bdf8, #22c55e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .container { display: flex; gap: 30px; width: 100%; max-width: 1200px; justify-content: center; }
        
        /* Square Input Area */
        .input-side { display: flex; flex-direction: column; align-items: center; }
        textarea { width: 400px; height: 400px; border-radius: 20px; padding: 20px; background: rgba(255,255,255,0.05); color: white; border: 1px solid #334155; resize: none; outline: none; transition: 0.3s; }
        textarea:focus { border-color: #38bdf8; box-shadow: 0 0 15px rgba(56, 189, 248, 0.2); }
        
        /* Table Box */
        .table-box { flex-grow: 1; background: rgba(15, 23, 42, 0.8); border-radius: 20px; padding: 25px; border: 1px solid #1e293b; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        table { width: 100%; border-collapse: collapse; }
        th { color: #38bdf8; text-align: left; padding: 15px; border-bottom: 2px solid #334155; font-size: 14px; text-transform: uppercase; }
        td { padding: 15px; border-bottom: 1px solid #1e293b; font-size: 15px; }
        
        /* AI Chat Box */
        .ai-chat { width: 100%; max-width: 800px; margin-top: 40px; background: #0f172a; border-radius: 24px; padding: 20px; border: 1px solid #334155; position: relative; }
        .chat-display { height: 200px; overflow-y: auto; margin-bottom: 15px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 12px; display: flex; flex-direction: column; gap: 10px; }
        .ai-msg { background: rgba(56, 189, 248, 0.1); padding: 10px 15px; border-radius: 12px; align-self: flex-start; border-left: 4px solid #38bdf8; max-width: 90% }
        .user-msg { background: rgba(255,255,255,0.05); padding: 10px 15px; border-radius: 12px; align-self: flex-end; }
        
        .chat-controls { display: flex; gap: 10px; }
        input[type="text"] { flex-grow: 1; background: #1e293b; border: 1px solid #334155; border-radius: 10px; padding: 12px; color: white; outline: none; }
        
        button { cursor: pointer; border: none; border-radius: 10px; padding: 12px 24px; font-weight: bold; transition: 0.3s; text-transform: uppercase; }
        .btn-update { background: linear-gradient(135deg, #38bdf8, #22c55e); color: #020617; width: 100%; margin-top: 15px; }
        .btn-send { background: #38bdf8; color: #020617; }
        .badge { background: #22c55e; color: #020617; padding: 3px 8px; border-radius: 5px; font-size: 10px; font-weight: 800; margin-left: 8px; }
    </style>
</head>
<body>

<div class="header">
    <h1>TATA PLAY FIBER</h1>
    <p>SMART PLAN VIEWER</p>
</div>

<div class="container">
    <div class="input-side">
        <textarea id="input" placeholder="Example:
200_6M with Mega : 300 cashback | 100_12M with Mini : 500 cashback"></textarea>
        <button class="btn-update" onclick="convert()">Sync Offers</button>
    </div>

    <div class="table-box">
        <table id="tableMain">
            <thead>
                <tr><th>Speed</th><th>Validity</th><th>OTT Plan</th><th>Cashback</th></tr>
            </thead>
            <tbody id="tableBody">
                <tr><td colspan="4" style="text-align:center; padding-top:100px; color:#64748b;">Paste your fiber data to begin.</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div class="ai-chat">
    <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px;">
        <div style="width:10px; height:10px; background:#22c55e; border-radius:50%; box-shadow:0 0 10px #22c55e;"></div>
        <strong style="color:#38bdf8">Price Intelligence AI</strong>
    </div>
    <div class="chat-display" id="chatDisplay">
        <div class="ai-msg">Ask me about plan prices! Try: "What is 100 Mbps price?"</div>
    </div>
    <div class="chat-controls">
        <input type="text" id="aiInput" placeholder="Ask about 50, 100, 200, 500 Mbps prices..." onkeypress="if(event.key==='Enter') askAI()">
        <button class="btn-send" onclick="askAI()">Ask AI</button>
    </div>
</div>

<script>
const planPrices = {
    "50": 649, "100": 850, "150": 1050, "200": 1150, "300": 1500, "500": 2300, "1000": 3600
};

function convert() {
    let text = document.getElementById("input").value.trim();
    if (!text) return;
    let lines = text.split("|");
    let tableBody = document.getElementById("tableBody");
    tableBody.innerHTML = "";

    lines.forEach(line => {
        let parts = line.trim().split(" ");
        if (parts.length < 5) return;
        let sp = parts[0].split("_");
        let speed = sp[0];
        let validity = sp[1].replace("M", " Months");
        let ott = parts[2];
        let cashback = parts[4];
        let badge = parseInt(cashback) >= 400 ? '<span class="badge">HOT DEAL</span>' : '';

        tableBody.innerHTML += `<tr>
            <td><strong>${speed} Mbps</strong></td>
            <td>${validity}</td>
            <td style="color:#38bdf8">${ott}</td>
            <td style="color:#22c55e; font-weight:bold;">₹${cashback} ${badge}</td>
        </tr>`;
    });
}

function askAI() {
    let input = document.getElementById("aiInput");
    let display = document.getElementById("chatDisplay");
    let msg = input.value.toLowerCase();
    if(!msg) return;

    display.innerHTML += `<div class="user-msg">${input.value}</div>`;
    
    let response = "I'm not sure about that specific request. Ask me about speeds like 50, 100, or 200 Mbps!";
    
    // Logic to find price in our database
    for (let speed in planPrices) {
        if (msg.includes(speed)) {
            let base = planPrices[speed];
            let withTax = Math.round(base * 1.18);
            response = `The ${speed} Mbps plan is ₹${base}/month. With 18% GST, it comes to approximately <b>₹${withTax}</b>. Would you like to see 6-month savings for this?`;
            break;
        }
    }

    setTimeout(() => {
        display.innerHTML += `<div class="ai-msg">${response}</div>`;
        display.scrollTop = display.scrollHeight;
    }, 400);
    input.value = "";
}
</script>

</body>
</html>
